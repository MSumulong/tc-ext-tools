
############################################################################
#                                                                          #
#    package build functions: configure, compile, install, rules, etc.     #
#                                                                          #
############################################################################

## compile
build_compile() {

   make || return 1

}

## install
build_install() {

  make INSTALL_MOD_PATH=$I_ROOT install-modules || return 1

  find $I_ROOT -type f -name "*.ko" -exec gzip {} \;

  install -dm755 $I_ROOT/usr/sbin
  install -dm755 $I_ROOT/lib/udev/rules.d
  install -dm755 $I_ROOT/usr/lib/compat-wireless
  install scripts/madwifi-unload	$I_ROOT/usr/sbin/
  install scripts/athenable		$I_ROOT/usr/sbin/
  install scripts/b43enable		$I_ROOT/usr/sbin/
  install scripts/iwl-enable		$I_ROOT/usr/sbin/
  install scripts/athload		$I_ROOT/usr/sbin/
  install scripts/b43load		$I_ROOT/usr/sbin/
  install scripts/iwl-load		$I_ROOT/usr/sbin/
  install udev/compat_firmware.sh	$I_ROOT/lib/udev/
  install udev/50-compat_firmware.rules $I_ROOT/lib/udev/rules.d/
  install scripts/modlib.sh		$I_ROOT/usr/lib/compat-wireless/
  install scripts/check_depmod  	$I_ROOT/usr/lib/compat-wireless/

}

## rules
build_rules() {

   tet_load
   tet_download
   tet_convert
   tet_unpack
   tet_patch
   tet_compile
   tet_install
   tet_split
   tet_strip
   tet_create
   tet_generate
   tet_check
   tet_test
   tet_package
   tet_encrypt

}

