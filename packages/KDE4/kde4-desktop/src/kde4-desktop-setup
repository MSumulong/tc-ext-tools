#!/bin/sh

THIS=$(basename $0)

if [ "X$(grep update-mime-database /usr/local/share/mime /opt/bootlocal.sh)" = "X" ]; then
cat >> /opt/bootlocal.sh << EOF
## Added by ${THIS} please do not edit
[ \$(which update-mime-database) ] && update-mime-database /usr/local/share/mime > /dev/null 2>&1
#
EOF
fi

if [ "X$(grep update-desktop-database /opt/bootlocal.sh)" = "X" ]; then
cat >> /opt/bootlocal.sh << EOF
## Added by ${THIS} please do not edit
[ \$(which update-desktop-database) ] && update-desktop-database -q > /dev/null 2>&1
#
EOF
fi

if [ "X$(grep gtk-update-icon-cache /opt/bootlocal.sh)" = "X" ]; then
cat >> /opt/bootlocal.sh << EOF
## Added by ${THIS} please do not edit
[ \$(which gtk-update-icon-cache) ] && gtk-update-icon-cache -q -f -t /usr/local/share/icons/hicolor > /dev/null 2>&1
#
EOF
fi

if [ "X$(grep /usr/local/etc/init.d/kdm /opt/bootlocal.sh)" = "X" ]; then
cat >> /opt/bootlocal.sh << EOF
## Added by ${THIS} please do not edit
[ -x /usr/local/etc/init.d/kdm ] && /usr/local/etc/init.d/kdm start > /dev/null 2>&1
#
EOF
fi

if [ "X$(grep usr/local/share/config/kdm/kdmrc /opt/.filetool.lst)" = "X" ]; then
     echo "usr/local/share/config/kdm/kdmrc" >> /opt/.filetool.lst
fi

if [ "X$(grep etc/shadow /opt/.filetool.lst)" = "X" ]; then
     echo "etc/shadow" >> /opt/.filetool.lst
fi


