
############################################################################
#                                                                          #
#    package build functions: configure, compile, install, rules, etc.     #
#                                                                          #
############################################################################

export FFLAGS="-O -ffloat-store"

[ -e /usr/local/include/qhull ] || ln -s /usr/local/include/libqhull /usr/local/include/qhull
[ -e /usr/local/include/libqhull/qhull.h ] || sudo ln -s /usr/local/include/libqhull/libqhull.h /usr/local/include/libqhull/qhull.h

## configure
build_configure() {

   ./configure --prefix=/usr/local \
     --disable-docs \
     --without-opengl --without-fltk \
     --with-qhull=qhull6 --with-qhull-includedir=/usr/local/include/libqhull --with-qhull-libdir=/usr/local/lib || return 1

}

## compile
build_compile() {

   [ -L /usr/local/bin/gfortran ] && sudo cp -Lf /usr/local/bin/gfortran /usr/local/bin/

   make || return 1

}

## install
build_install() {

   make DESTDIR="$I_ROOT" install || return 1

}

## rules
build_rules() {

   tet_load
   tet_download
   tet_convert
   tet_unpack
   tet_patch
   tet_configure
   tet_compile
   tet_install
   tet_split
   tet_strip
   tet_create
   tet_generate
   tet_check
   tet_test
   tet_package
   tet_encrypt

}

